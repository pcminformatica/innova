{% extends 'layout_main-drawer--dismissible_footer_topbar.html' %}
{% block page_description %}Innova Mujer Home, Casa, Dashboard, Home{% endblock %}
{% block page_title %}Innova Mujer Home{% endblock %}
{% block css_script_section %}
<style>
    .alignleft {
	float: left;
}
.alignright {
	float: right;
}
@media print {
  * { overflow: visible !important; } 
  .mdc-top-app-bar__row{
    display: none
  }

  .s-toptab{
    display: none;
  }
  .no-print{
    display: none;
  }

  .footer-about{
    display: none;
  }
  .s-footer{
    display: none;
  }
  @page {size: landscape}
  body {
    background: none;
    -ms-zoom: 2.665;
    margin: 0;
    padding: 0;
  }
  .mdc-snackbar{
    display: none;
  }
}

</style>
{% endblock %}
{% block body %}
<main class="s-main-content">
    <div class="container-color-background">
        <div class="mdc-layout-grid container">
            <div class="mdc-layout-grid__inner">
              <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12-desktop mdc-layout-grid__cell--span-12-tablet mdc-layout-grid__cell--span-12-phone">
                <div class="container-dashboard--messages">
                    <div class="mdc-card mdc-card--color-on-primary">
                        <div class="mdc-tab-bar" role="tablist" data-action-fn="showMessagesContracts">
                            <div class="mdc-tab-scroller">
                                <div class="mdc-tab-scroller__scroll-area">
                                    <div class="mdc-tab-scroller__scroll-content">
                                        <button class="mdc-tab mdc-tab--active" role="tab" aria-selected="true" tabindex="0">
                                            <span class="mdc-tab__content">
                                                <span class="mdc-tab__text-label">Datos de la empresa</span>
                                            </span>
                                            <span class="mdc-tab-indicator mdc-tab-indicator--active">
                                                <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>
                                            </span>
                                            <span class="mdc-tab__ripple"></span>
                                        </button>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mdc-card__content container-dashboard--messages-msg">
                            
                          <div class="mdc-layout-grid__inner">
                            <div class="mdc-layout-grid__cell--span-4-desktop  mdc-layout-grid__cell--span-12-tablet mdc-layout-grid__cell--span-12-phone">
                              <div class="mdc-typography--body1">
                                  Nombre de la empresa:
                              </div>
                              <label class="mdc-text-field mdc-text-field--filled" id="txt_name" data-assigned-var>
                                  <span class="mdc-text-field__ripple"></span>
                                 
                                  <input id="txt_company_name" value="{{ api.NOMBRE_EMPRESA }}" class="mdc-text-field__input" type="text" aria-labelledby="my-label-id" readonly>
                                  <span lass="mdc-line-ripple"></span>
                              </label>
                            </div>
                            <div class="mdc-layout-grid__cell--span-4-desktop  mdc-layout-grid__cell--span-12-tablet mdc-layout-grid__cell--span-12-phone">
                              <div class="mdc-typography--body1">
                                  RTN:
                              </div>
                              <label class="mdc-text-field mdc-text-field--filled" id="txt_name" data-assigned-var>
                                  <span class="mdc-text-field__ripple"></span>

                                  <input id="txt_company_rtn" value="{{ api.RTN }}" class="mdc-text-field__input" type="text" aria-labelledby="my-label-id" readonly >
                                  <span lass="mdc-line-ripple"></span>
                              </label>
                            </div>
                            <div class="mdc-layout-grid__cell--span-4-desktop  mdc-layout-grid__cell--span-12-tablet mdc-layout-grid__cell--span-12-phone">
                              <div class="mdc-typography--body1">
                                  EMAIL:
                              </div>
                              <label class="mdc-text-field mdc-text-field--filled" id="txt_name" data-assigned-var>
                                  <span class="mdc-text-field__ripple"></span>

                                  <input value="{{ api.EMAIL }}" class="mdc-text-field__input" type="text" aria-labelledby="my-label-id" >
                                  <span lass="mdc-line-ripple"></span>
                              </label>
                            </div>
                            <div class="mdc-layout-grid__cell--span-4-desktop  mdc-layout-grid__cell--span-12-tablet mdc-layout-grid__cell--span-12-phone">
                              <div class="mdc-typography--body1">
                                  TELEFONO:
                              </div>
                              <label class="mdc-text-field mdc-text-field--filled" id="txt_name" data-assigned-var>
                                  <span class="mdc-text-field__ripple"></span>

                                  <input value="{{ api.TELEFONO }}" class="mdc-text-field__input" type="text" aria-labelledby="my-label-id" >
                                  <span lass="mdc-line-ripple"></span>
                              </label>
                            </div>

                            <div class="mdc-layout-grid__cell--span-8-desktop  mdc-layout-grid__cell--span-12-tablet mdc-layout-grid__cell--span-12-phone">
                              <div class="mdc-typography--body1">
                                  DIRECCION:
                              </div>
                              <label class="mdc-text-field mdc-text-field--filled" id="txt_name" data-assigned-var>
                                  <span class="mdc-text-field__ripple"></span>
                                  <span class="mdc-floating-label" id="my-label-id">Escribe tu nombre</span>
                                  <input value="{{ api.DIRECCION }}" class="mdc-text-field__input" type="text" aria-labelledby="my-label-id" >
                                  <span lass="mdc-line-ripple"></span>
                              </label>
                            </div>
                            
                          </div>
                        </div>
          
                            
                         


                        <div class="mdc-card__actions">
                            <div class="mdc-card__actions-buttons">
                            </div>
                            <div class="mdc-card__action-icons">
                                <button class="mdc-icon-button material-icons mdc-card__action mdc-card__action--icon">
                                    <div class="mdc-icon-button__ripple"></div>
                                    more_vert
                                </button>
                            </div>
                        </div>
                    
                    
                </div>
                </div>
            </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-12-phone">
                    <div class="container-dashboard--messages">
                        <div class="mdc-card mdc-card--color-on-primary">
                            <div class="mdc-tab-bar" role="tablist" data-action-fn="showMessagesContracts">
                                <div class="mdc-tab-scroller">
                                    <div class="mdc-tab-scroller__scroll-area">
                                        <div class="mdc-tab-scroller__scroll-content">
                                            <button class="mdc-tab mdc-tab--active" role="tab" aria-selected="true" tabindex="0">
                                                <span class="mdc-tab__content">
                                                    <span class="mdc-tab__text-label">Servicios Recomendados ({{totalServicios}})</span>
                                                </span>
                                                <span class="mdc-tab-indicator mdc-tab-indicator--active">
                                                    <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>
                                                </span>
                                                <span class="mdc-tab__ripple"></span>
                                            </button>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mdc-card__content container-dashboard--messages-msg">
                              <br>
                              <h2>LEGALIZACIÓN ({{ legalizacion|length }})</h2>
                              <br>     
                              <div class="mdc-data-table" style="background-color: white;width: 100%;" >
                                <div class="mdc-data-table__table-container">
                                  <table class="mdc-data-table__table_normal" aria-label="Dessert calories">
                                    <thead>
                                      <tr class="mdc-data-table__header-row">
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">#</th>
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Servicio</th>
                                        <th class="mdc-data-table__header-cell no-print" role="columnheader" scope="col">Descripción</th>
                                        <th class="mdc-data-table__header-cell no-print" role="columnheader" scope="col">Configuración</th>
                                        <th class="mdc-data-table__header-cell no-print" role="columnheader" scope="col">Acciones</th>
                                      </tr>
                                      
                                      
                                      
                                    </thead>
                                    <tbody class="mdc-data-table__content">
                                        {% for apix in legalizacion%}
                                        
                                      
                                      <tr class="mdc-data-table__row">
                                        <th class="mdc-data-table__cell" scope="row">
                                            {{loop.index}}
                                        </th>
                                        <th class="mdc-data-table__cell" scope="row" >
                                          <p>
                                            {{ apix.titulo }}

                                          </p>
                                        </th>
                                        <td class="mdc-data-table__cell no-print">


                                          <br>
                                          Tiempo asesoría: <b>{{ apix.tiempo_asesoria }}  horas </b> 
                                          <br>
                                          Tiempo ejecución: <b>{{ apix.tiempo_ejecucion }} semanas </b> 
                                          <br>
                                          Costo: <b>{{ apix.costo }} </b> 
                                        </td>
      
                                        <td class="mdc-data-table__cell no-print">
                                          <label>Fecha de inicio:</label>
                                          <input type="date" id="date_{{ apix.id }}">
                                          <br><br>
                                          <label>Seleccione fase:</label>
                                          <select id="fase_{{ apix.id }}">
                                            <option value=""></option>
                                            <option value="FASE1">FASE 1</option>
                                            <option value="FASE2">FASE 2</option>
                                          </select>
                                        </td>
                                        <td class="mdc-data-table__cell no-print">
                                            <button onclick="agregar('LEGALIZACIÓN', '{{ apix.id }}','{{ apix.titulo }}','{{ apix.tiempo_ejecucion }}')" class="mdc-button mdc-button--raised mdc-button--leading" style="--mdc-ripple-fg-size: 75px; --mdc-ripple-fg-scale: 1.8784232240642684; --mdc-ripple-fg-translate-start: 16.41668701171875px, -7.866668701171875px; --mdc-ripple-fg-translate-end: 25.416671752929688px, -19.5px;">
                                            
                                                <span class="mdc-button__ripple"></span>
                                                <i class="material-icons mdc-button__icon" aria-hidden="true">add</i>
                                                <span class="mdc-button__label">Agregar</span>
                                            </button>
                                        </td>
                                      </tr>
                                      {% endfor %}
                                    </tbody>
                                  </table>
                                </div>
                              
                                <div class="mdc-data-table__progress-indicator">
                                  <div class="mdc-data-table__scrim"></div>
                                  <div class="mdc-linear-progress mdc-linear-progress--indeterminate mdc-data-table__linear-progress" role="progressbar" aria-label="Data is being loaded...">
                                    <div class="mdc-linear-progress__buffer">
                                      <div class="mdc-linear-progress__buffer-bar"></div>
                                      <div class="mdc-linear-progress__buffer-dots"></div>
                                    </div>
                                    <div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar">
                                      <span class="mdc-linear-progress__bar-inner"></span>
                                    </div>
                                    <div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar">
                                      <span class="mdc-linear-progress__bar-inner"></span>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <br>
                                <h2>ADMINISTRACIÓN ({{ administracion|length }})</h2>
                              <br>
                              <div class="mdc-data-table" style="background-color: white;width: 100%;" >
                                <div class="mdc-data-table__table-container">
                                  <table class="mdc-data-mdc-data-table__table_normal" aria-label="Dessert calories">
                                    <thead>
                                      <tr class="mdc-data-table__header-row">
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">#</th>
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">ACTIVIDAD</th>
                                        <th class="mdc-data-table__header-cell no-print" role="columnheader" scope="col">FECHA</th>
                                        <th class="mdc-data-table__header-cell no-print" role="columnheader" scope="col">FASE</th>
                                        <th class="mdc-data-table__header-cell no-print" role="columnheader" scope="col">ACCIONES</th>
                                      </tr>
                                      
                                      
                                      
                                    </thead>
                                    <tbody class="mdc-data-table__content">
                                        {% for apix in administracion%}
                                        
                                      
                                      <tr class="mdc-data-table__row">
                                        <th class="mdc-data-table__cell" scope="row">
                                          {{loop.index}}
                                      </th>
                                      <th class="mdc-data-table__cell" scope="row" >
                                        <p>
                                          {{ apix.titulo }}

                                        </p>
                                      </th>
                                      <td class="mdc-data-table__cell no-print">


                                        <br>
                                        Tiempo asesoría: <b>{{ apix.tiempo_asesoria }}  horas </b> 
                                        <br>
                                        Tiempo ejecución: <b>{{ apix.tiempo_ejecucion }} semanas </b> 
                                        <br>
                                        Costo: <b>{{ apix.costo }} </b> 
                                      </td>
    
                                      <td class="mdc-data-table__cell no-print">
                                        <label>Fecha de inicio:</label>
                                        <input type="date" id="date_{{ apix.id }}">
                                        <br><br>
                                        <label>Seleccione fase:</label>
                                        <select id="fase_{{ apix.id }}">
                                          <option value=""></option>
                                          <option value="FASE1">FASE 1</option>
                                          <option value="FASE2">FASE 2</option>
                                        </select>
                                      </td>
      
                                    
                                        <td class="mdc-data-table__cell no-print">
                                            <button onclick="agregar('ADMINISTRACIÓN', '{{ apix.id }}','{{ apix.titulo }}','{{ apix.tiempo_ejecucion }}')" class="mdc-button mdc-button--raised mdc-button--leading" style="--mdc-ripple-fg-size: 75px; --mdc-ripple-fg-scale: 1.8784232240642684; --mdc-ripple-fg-translate-start: 16.41668701171875px, -7.866668701171875px; --mdc-ripple-fg-translate-end: 25.416671752929688px, -19.5px;">
                                            
                                                <span class="mdc-button__ripple"></span>
                                                <i class="material-icons mdc-button__icon" aria-hidden="true">add</i>
                                                <span class="mdc-button__label">Agregar</span>
                                            </button>
                                        </td>
                                      </tr>
                                      {% endfor %}
                                    </tbody>
                                  </table>
                                </div>
                              
                                <div class="mdc-data-table__progress-indicator">
                                  <div class="mdc-data-table__scrim"></div>
                                  <div class="mdc-linear-progress mdc-linear-progress--indeterminate mdc-data-table__linear-progress" role="progressbar" aria-label="Data is being loaded...">
                                    <div class="mdc-linear-progress__buffer">
                                      <div class="mdc-linear-progress__buffer-bar"></div>
                                      <div class="mdc-linear-progress__buffer-dots"></div>
                                    </div>
                                    <div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar">
                                      <span class="mdc-linear-progress__bar-inner"></span>
                                    </div>
                                    <div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar">
                                      <span class="mdc-linear-progress__bar-inner"></span>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <br>
                                <h2>PRODUCCIÓN Y AMBIENTE  ({{ produccion|length }})</h2>
                              <br>
                              <div class="mdc-data-table" style="background-color: white;width: 100%;" >
                                <div class="mdc-data-table__table-container">
                                  <table class="mdc-data-table__table_normal" aria-label="Dessert calories">
                                    <thead>
                                      <tr class="mdc-data-table__header-row">
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">#</th>
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">ACTIVIDAD</th>
                                        <th class="mdc-data-table__header-cell no-print" role="columnheader" scope="col">FECHA</th>
                                        <th class="mdc-data-table__header-cell no-print" role="columnheader" scope="col">FASE</th>
                                        <th class="mdc-data-table__header-cell no-print" role="columnheader" scope="col">ACCIONES</th>
                                      </tr>
                                      
                                      
                                      
                                    </thead>
                                    <tbody class="mdc-data-table__content">
                                        {% for apix in produccion%}
                                        
                                      
                                      <tr class="mdc-data-table__row">
                                        <th class="mdc-data-table__cell" scope="row">
                                          {{loop.index}}
                                      </th>
                                      <th class="mdc-data-table__cell" scope="row" >
                                        <p>
                                          {{ apix.titulo }}

                                        </p>
                                      </th>
                                      <td class="mdc-data-table__cell no-print">


                                        <br>
                                        Tiempo asesoría: <b>{{ apix.tiempo_asesoria }}  horas </b> 
                                        <br>
                                        Tiempo ejecución: <b>{{ apix.tiempo_ejecucion }} semanas </b> 
                                        <br>
                                        Costo: <b>{{ apix.costo }} </b> 
                                      </td>
    
                                      <td class="mdc-data-table__cell no-print">
                                        <label>Fecha de inicio:</label>
                                        <input type="date" id="date_{{ apix.id }}">
                                        <br><br>
                                        <label>Seleccione fase:</label>
                                        <select id="fase_{{ apix.id }}">
                                          <option value=""></option>
                                          <option value="FASE1">FASE 1</option>
                                          <option value="FASE2">FASE 2</option>
                                        </select>
                                      </td>
                                    
                                        <td class="mdc-data-table__cell no-print">
                                            <button onclick="agregar('PRODUCCIÓN Y AMBIENTE', '{{ apix.id }}','{{ apix.titulo }}','{{ apix.tiempo_ejecucion }}')" class="mdc-button mdc-button--raised mdc-button--leading" style="--mdc-ripple-fg-size: 75px; --mdc-ripple-fg-scale: 1.8784232240642684; --mdc-ripple-fg-translate-start: 16.41668701171875px, -7.866668701171875px; --mdc-ripple-fg-translate-end: 25.416671752929688px, -19.5px;">
                                            
                                                <span class="mdc-button__ripple"></span>
                                                <i class="material-icons mdc-button__icon" aria-hidden="true">add</i>
                                                <span class="mdc-button__label">Agregar</span>
                                            </button>
                                        </td>
                                      </tr>
                                      {% endfor %}
                                    </tbody>
                                  </table>
                                </div>
                              
                                <div class="mdc-data-table__progress-indicator">
                                  <div class="mdc-data-table__scrim"></div>
                                  <div class="mdc-linear-progress mdc-linear-progress--indeterminate mdc-data-table__linear-progress" role="progressbar" aria-label="Data is being loaded...">
                                    <div class="mdc-linear-progress__buffer">
                                      <div class="mdc-linear-progress__buffer-bar"></div>
                                      <div class="mdc-linear-progress__buffer-dots"></div>
                                    </div>
                                    <div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar">
                                      <span class="mdc-linear-progress__bar-inner"></span>
                                    </div>
                                    <div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar">
                                      <span class="mdc-linear-progress__bar-inner"></span>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <br>
                                <h2>ANÁLISIS FINANCIERO ({{ financiera|length }})</h2>
                              <br>
                              <div class="mdc-data-table" style="background-color: white;width: 100%;" >
                                <div class="mdc-data-table__table-container">
                                  <table class="mdc-data-table__table_normal" aria-label="Dessert calories">
                                    <thead>
                                      <tr class="mdc-data-table__header-row">
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">#</th>
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">ACTIVIDAD</th>
                                        <th class="mdc-data-table__header-cell no-print" role="columnheader" scope="col">FECHA</th>
                                        <th class="mdc-data-table__header-cell no-print" role="columnheader" scope="col">FASE</th>
                                        <th class="mdc-data-table__header-cell no-print" role="columnheader" scope="col">ACCIONES</th>
                                      </tr>
                                      
                                      
                                      
                                    </thead>
                                    <tbody class="mdc-data-table__content">
                                        {% for apix in financiera%}
                                        
                                      
                                      <tr class="mdc-data-table__row">
                                        <th class="mdc-data-table__cell" scope="row">
                                          {{loop.index}}
                                      </th>
                                      <th class="mdc-data-table__cell" scope="row" >
                                        <p>
                                          {{ apix.titulo }}

                                        </p>
                                      </th>
                                      <td class="mdc-data-table__cell no-print">


                                        <br>
                                        Tiempo asesoría: <b>{{ apix.tiempo_asesoria }}  horas </b> 
                                        <br>
                                        Tiempo ejecución: <b>{{ apix.tiempo_ejecucion }} semanas </b> 
                                        <br>
                                        Costo: <b>{{ apix.costo }} </b> 
                                      </td>
    
                                      <td class="mdc-data-table__cell no-print">
                                        <label>Fecha de inicio:</label>
                                        <input type="date" id="date_{{ apix.id }}">
                                        <br><br>
                                        <label>Seleccione fase:</label>
                                        <select id="fase_{{ apix.id }}">
                                          <option value=""></option>
                                          <option value="FASE1">FASE 1</option>
                                          <option value="FASE2">FASE 2</option>
                                        </select>
                                      </td>
                                        <td class="mdc-data-table__cell no-print">
                                            <button onclick="agregar('ANÁLISIS FINANCIERO', '{{ apix.id }}','{{ apix.titulo }}','{{ apix.tiempo_ejecucion }}')" class="mdc-button mdc-button--raised mdc-button--leading" style="--mdc-ripple-fg-size: 75px; --mdc-ripple-fg-scale: 1.8784232240642684; --mdc-ripple-fg-translate-start: 16.41668701171875px, -7.866668701171875px; --mdc-ripple-fg-translate-end: 25.416671752929688px, -19.5px;">
                                            
                                                <span class="mdc-button__ripple"></span>
                                                <i class="material-icons mdc-button__icon" aria-hidden="true">add</i>
                                                <span class="mdc-button__label">Agregar</span>
                                            </button>
                                        </td>
                                      </tr>
                                      {% endfor %}
                                    </tbody>
                                  </table>
                                </div>
                              
                                <div class="mdc-data-table__progress-indicator">
                                  <div class="mdc-data-table__scrim"></div>
                                  <div class="mdc-linear-progress mdc-linear-progress--indeterminate mdc-data-table__linear-progress" role="progressbar" aria-label="Data is being loaded...">
                                    <div class="mdc-linear-progress__buffer">
                                      <div class="mdc-linear-progress__buffer-bar"></div>
                                      <div class="mdc-linear-progress__buffer-dots"></div>
                                    </div>
                                    <div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar">
                                      <span class="mdc-linear-progress__bar-inner"></span>
                                    </div>
                                    <div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar">
                                      <span class="mdc-linear-progress__bar-inner"></span>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <br>
                                <h2>MERCADEO Y TICs ({{ mercadeo|length }})</h2>
                              <br>
                              <div class="mdc-data-table" style="background-color: white;width: 100%;" >
                                <div class="mdc-data-table__table-container">
                                  <table class="mdc-data-table__table_normal" aria-label="Dessert calories">
                                    <thead>
                                      <tr class="mdc-data-table__header-row">
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">#</th>
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">ACTIVIDAD</th>
                                        <th class="mdc-data-table__header-cell no-print" role="columnheader" scope="col">FECHA</th>
                                        <th class="mdc-data-table__header-cell no-print" role="columnheader" scope="col">FASE</th>
                                        <th class="mdc-data-table__header-cell no-print" role="columnheader" scope="col">ACCIONES</th>
                                      </tr>
                                      
                                      
                                      
                                    </thead>
                                    <tbody class="mdc-data-table__content">
                                        {% for apix in mercadeo%}
                                        
                                      
                                      <tr class="mdc-data-table__row">
                                        <th class="mdc-data-table__cell" scope="row">
                                          {{loop.index}}
                                      </th>
                                      <th class="mdc-data-table__cell" scope="row" >
                                        <p>
                                          {{ apix.titulo }}

                                        </p>
                                      </th>
                                      <td class="mdc-data-table__cell no-print">


                                        <br>
                                        Tiempo asesoría: <b>{{ apix.tiempo_asesoria }}  horas </b> 
                                        <br>
                                        Tiempo ejecución: <b>{{ apix.tiempo_ejecucion }} semanas </b> 
                                        <br>
                                        Costo: <b>{{ apix.costo }} </b> 
                                      </td>
    
                                      <td class="mdc-data-table__cell no-print">
                                        <label>Fecha de inicio:</label>
                                        <input type="date" id="date_{{ apix.id }}">
                                        <br><br>
                                        <label>Seleccione fase:</label>
                                        <select id="fase_{{ apix.id }}">
                                          <option value=""></option>
                                          <option value="FASE1">FASE 1</option>
                                          <option value="FASE2">FASE 2</option>
                                        </select>
                                      </td>
                                    
                                        <td class="mdc-data-table__cell no-print">
                                            <button onclick="agregar('MERCADEO Y TICs', '{{ apix.id }}','{{ apix.titulo }}','{{ apix.tiempo_ejecucion }}')" class="mdc-button mdc-button--raised mdc-button--leading" style="--mdc-ripple-fg-size: 75px; --mdc-ripple-fg-scale: 1.8784232240642684; --mdc-ripple-fg-translate-start: 16.41668701171875px, -7.866668701171875px; --mdc-ripple-fg-translate-end: 25.416671752929688px, -19.5px;">
                                            
                                                <span class="mdc-button__ripple"></span>
                                                <i class="material-icons mdc-button__icon" aria-hidden="true">add</i>
                                                <span class="mdc-button__label">Agregar</span>
                                            </button>
                                        </td>
                                      </tr>
                                      {% endfor %}
                                    </tbody>
                                  </table>
                                </div>
                              
                                <div class="mdc-data-table__progress-indicator">
                                  <div class="mdc-data-table__scrim"></div>
                                  <div class="mdc-linear-progress mdc-linear-progress--indeterminate mdc-data-table__linear-progress" role="progressbar" aria-label="Data is being loaded...">
                                    <div class="mdc-linear-progress__buffer">
                                      <div class="mdc-linear-progress__buffer-bar"></div>
                                      <div class="mdc-linear-progress__buffer-dots"></div>
                                    </div>
                                    <div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar">
                                      <span class="mdc-linear-progress__bar-inner"></span>
                                    </div>
                                    <div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar">
                                      <span class="mdc-linear-progress__bar-inner"></span>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
              
                                
                             


                            <div class="mdc-card__actions">
                                <div class="mdc-card__actions-buttons">
                                </div>
                                <div class="mdc-card__action-icons">
                                    <button class="mdc-icon-button material-icons mdc-card__action mdc-card__action--icon">
                                        <div class="mdc-icon-button__ripple"></div>
                                        more_vert
                                    </button>
                                </div>
                            </div>
                        
                        
                    </div>
                    </div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-12-phone">
                    <div class="container-dashboard--messages">
                        <div class="mdc-card mdc-card--color-on-primary">
                            <div class="mdc-tab-bar" role="tablist" data-action-fn="showMessagesContracts">
                              
                                <div class="mdc-tab-scroller">
                                    <div class="mdc-tab-scroller__scroll-area">
                                      
                                        <div class="mdc-tab-scroller__scroll-content">
                                          
                                            <button class="mdc-tab mdc-tab--active" role="tab" aria-selected="true" tabindex="0">
                                                <span class="mdc-tab__content">
                                                    <span class="mdc-tab__text-label">Plan de Acción </span>
                                                </span>
                                                <span class="mdc-tab-indicator mdc-tab-indicator--active">
                                                    <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>
                                                </span>
                                                <span class="mdc-tab__ripple"></span>
                                            </button>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mdc-card__content container-dashboard--messages-msg" style="text-align: center">
                              <br>
                              <h2>FASE 1</h2>
                              <br>
                                  <div  class="mdc-data-table" style="background-color: white;width: 100%;" >
                                    <div class="mdc-data-table__table-container">
                                      <table id="tbl_plan_1" class="mdc-data-table__table_normal" aria-label="Dessert calories">
                                        <thead>
                                          <tr class="mdc-data-table__header-row">
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">CATEGORÍA</th>
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">ACTIVIDAD</th>
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">INICIO</th>
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">FIN</th>
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">COMENTARIO</th>
                                            <th class="mdc-data-table__header-cell no-print" role="columnheader" scope="col">ACCIONES</th>
                                          </tr>
                                          
                                          
                                          
                                        </thead>
                                        <tbody >
                                        {% for apix in plan %}
                                        
                                            {% if apix.fase == 1 %}
                                            <tr id="{{apix.services.id}}" class="mdc-data-table__row">
                                              <th class="mdc-data-table__cell" scope="row">
                                                  {{loop.index}}
                                              </th>
                                              <th class="mdc-data-table__cell" scope="row">
                                                <p>
                                                  {{ apix.services.name }}
                                                </p>
                                              </th>
                                              <td class="mdc-data-table__cell ">
                                                {% if apix.date_scheduled_start %}
                                                  {{ apix.date_scheduled_start.strftime('%Y-%m-%d')  }}
                                                {% endif %}
                                              </td>
            
                                              <td class="mdc-data-table__cell ">
                                                {% if apix.date_scheduled_start %}
                                                  {{ apix.date_scheduled_end.strftime('%Y-%m-%d')  }}
                                                {% endif %}
                                              </td>
                                              <th class="mdc-data-table__cell" scope="row">
                                                <p>
                                                  {{ apix.descripcion }}
                                                </p>
                                              </th>
                                              <td class="mdc-data-table__cell no-print">
                                             
                                              {% if apix.progress == 0 %}
                                                <button onclick="deleteActionPlan('{{ apix.id  }}')" class="mdc-button mdc-button--raised mdc-button--leading" style="--mdc-ripple-fg-size: 75px; --mdc-ripple-fg-scale: 1.8784232240642684; --mdc-ripple-fg-translate-start: 16.41668701171875px, -7.866668701171875px; --mdc-ripple-fg-translate-end: 25.416671752929688px, -19.5px;">
                                              
                                                  <span class="mdc-button__ripple"></span>
                                                  <i class="material-icons mdc-button__icon" aria-hidden="true">close</i>
                                                  <span class="mdc-button__label">Eliminar</span>
                                                </button>
                                              {% else %}
                                                Avance: {{ apix.progress  }}%
                                              {% endif %}
                                            
                                              </td>

                                            </tr>
                                            {% endif %}
                                          {% endfor %}
                                        </tbody>
                                        <tbody id="tablaPlan_1" class="mdc-data-table__content">
  
                                        </tbody>
                                      </table>
                                    </div>
                                  
                                    <div class="mdc-data-table__progress-indicator">
                                      <div class="mdc-data-table__scrim"></div>
                                      <div class="mdc-linear-progress mdc-linear-progress--indeterminate mdc-data-table__linear-progress" role="progressbar" aria-label="Data is being loaded...">
                                        <div class="mdc-linear-progress__buffer">
                                          <div class="mdc-linear-progress__buffer-bar"></div>
                                          <div class="mdc-linear-progress__buffer-dots"></div>
                                        </div>
                                        <div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar">
                                          <span class="mdc-linear-progress__bar-inner"></span>
                                        </div>
                                        <div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar">
                                          <span class="mdc-linear-progress__bar-inner"></span>
                                        </div>
                                      </div>
                                    </div>

                          
                                    
                                  </div>
                                  <br>
                                  <h2>FASE 2</h2>
                                  <br>
                                  <div  class="mdc-data-table" style="background-color: white;width: 100%;" >
                                    <div class="mdc-data-table__table-container">
                                      <table id="tbl_plan_2" class="mdc-data-table__table_normal" aria-label="Dessert calories">
                                        <thead>
                                          <tr class="mdc-data-table__header-row">
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">CATEGORÍA</th>
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">ACTIVIDAD</th>
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">INICIO</th>
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">FIN</th>
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">COMENTARIO</th>
                                            <th class="mdc-data-table__header-cell no-print" role="columnheader" scope="col">ACCIONES</th>
                                          </tr>
                                          
                                          
                                          
                                        </thead>
                                        {% for apix in plan %}
                                        
                                        {% if apix.fase == 2 %}
                                          <tr class="mdc-data-table__row">
                                            <th class="mdc-data-table__cell" scope="row">
                                                {{loop.index}}
                                            </th>
                                            <th class="mdc-data-table__cell" scope="row">
                                              <p>
                                                {{ apix.services.name }}
                                              </p>
                                            </th>
                                            <td class="mdc-data-table__cell ">
                                              {% if apix.date_scheduled_start %}
                                                {{ apix.date_scheduled_start.strftime('%Y-%m-%d')  }}
                                              {% endif %}
                                            </td>
                                            <td class="mdc-data-table__cell ">
                                              {% if apix.date_scheduled_start %}
                                                {{ apix.date_scheduled_end.strftime('%Y-%m-%d')  }}
                                              {% endif %}
                                            </td>
                                        
                                
                                            <th class="mdc-data-table__cell" scope="row">
                                              <p>
                                                {{ apix.descripcion }}
                                              </p>
                                            </th>
                                            <td class="mdc-data-table__cell no-print">
                                              Porcentaje de avance: {{ apix.progress  }}%
                                            </td>
                                          </tr>
                                        {% endif %}
                                        {% endfor %}
                                        <tbody id="tablaPlan_2" class="mdc-data-table__content">

                                        </tbody>
                                      </table>
                                    </div>
                                  
                                    <div class="mdc-data-table__progress-indicator">
                                      <div class="mdc-data-table__scrim"></div>
                                      <div class="mdc-linear-progress mdc-linear-progress--indeterminate mdc-data-table__linear-progress" role="progressbar" aria-label="Data is being loaded...">
                                        <div class="mdc-linear-progress__buffer">
                                          <div class="mdc-linear-progress__buffer-bar"></div>
                                          <div class="mdc-linear-progress__buffer-dots"></div>
                                        </div>
                                        <div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar">
                                          <span class="mdc-linear-progress__bar-inner"></span>
                                        </div>
                                        <div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar">
                                          <span class="mdc-linear-progress__bar-inner"></span>
                                        </div>
                                      </div>
                                    </div>

                          
                                    
                                  </div>
                                  <br>
                                  <br>
                                  {% if plan %}
                                  <button  onclick="savePlan()" class="mdc-button mdc-button--color-secondary mdc-button--raised mdc-button--leading no-print" style="text-align: center">
                                            
                                    <span class="mdc-button__ripple"></span>
                                    <i class="material-icons mdc-button__icon" aria-hidden="true">save</i>
                                    <span class="mdc-button__label">Actualizar plan de acción</span>
                                  </button>
                                  <button  onclick="printPlan()" class="mdc-button mdc-button--raised mdc-button--leading no-print" style="text-align: center">
                                            
                                    <span class="mdc-button__ripple"></span>
                                    <i class="material-icons mdc-button__icon" aria-hidden="true">download</i>
                                    <span class="mdc-button__label">Imprimir plan de acción</span>
                                  </button>

                                  {% else %}
                                  <button  onclick="savePlan()" class="mdc-button mdc-button--raised mdc-button--leading no-print" style="text-align: center">
                                            
                                    <span class="mdc-button__ripple"></span>
                                    <i class="material-icons mdc-button__icon" aria-hidden="true">save</i>
                                    <span class="mdc-button__label">Guardar plan de acción</span>
                                  </button>
                                  {% endif %}
                            </div>
              
                                
                             


                            <div class="mdc-card__actions">
                                <div class="mdc-card__actions-buttons">
                                </div>
                                <div class="mdc-card__action-icons">
                                    <button class="mdc-icon-button material-icons mdc-card__action mdc-card__action--icon">
                                        <div class="mdc-icon-button__ripple"></div>
                                        more_vert
                                    </button>
                                </div>
                            </div>
                        
                        
                    </div>
                    </div>
                    
                </div>

            </div>
        </div>
    </div>

</main>
{% endblock %}
{% block body_script_section %}
<script src="{{ url_for('static', filename='js/superadmin.js') }}"></script>
<script>
    function agregar(categoria,id,servicio,tiempo_ejecucion){
      var resume_table_fase1 = document.getElementById("tbl_plan_1");
      const Swal = swcms.returnSwal()
      if (resume_table_fase1.rows.length>8){
        Swal.fire(
              'Límite de servicios en fase 1',
              'Has alcanzado límite de servicios a agregar en fase 1',
              'error'
            )
        return false
      }
      
      var resume_table_fase2 = document.getElementById("tbl_plan_2");
      
      for (var i = 1, row; row = resume_table_fase1.rows[i]; i++) {
          //alert(cell[i].innerText);
          if (id == resume_table_fase1.rows[i].id){
            Swal.fire(
              'Ya existe',
              'El servicio esta agregado en la fase 1',
              'error'
            )
            return false
          }  
        }
        for (var i = 1, row; row = resume_table_fase2.rows[i]; i++) {
          //alert(cell[i].innerText);
          if (id == resume_table_fase2.rows[i].id){
            Swal.fire(
              'Ya existe',
              'El servicio esta agregado en la fase 2',
              'error'
            )
            return false
          }  
        }

        fecha_inicio = document.getElementById('date_' +id).value
        fases = document.getElementById('fase_'+ id).value
        if (fecha_inicio=="" || fases==""){ alert('Elija una fecha y fase'); return false}
        console.log(fecha_inicio)
        console.log(tiempo_ejecucion)
        //pasamos las semanas a dias
        let dias = parseInt(tiempo_ejecucion) * 7;
        let fecha = new Date(fecha_inicio);
        fecha.setDate(fecha.getDate() + dias);
        fecha_fin = new Date(fecha).toISOString().slice(0, 10);
        var Tbl;

        if (fases == 'FASE1'){
          Tbl = document.getElementById("tablaPlan_1");
        }else{
          Tbl = document.getElementById("tablaPlan_2");
        }
        fecha = 'Fecha inicio: ' + fecha_inicio + ' Fecha fin: ' + fecha_fin
        
            var hilera = document.createElement("tr");
            var celda = document.createElement("td");
            var celda1 = document.createElement("td");
            var celda2 = document.createElement("td");
            var celda3 = document.createElement("td");
            var celda4 = document.createElement("td");
            var celda5 = document.createElement("td");

            var textoCelda1 = document.createTextNode(servicio);
            var textoCelda2 = document.createTextNode(fecha_inicio);
            var textoCelda3 = document.createTextNode(fecha_fin);
            var textoCelda = document.createTextNode(categoria);


            hilera.className = 'mdc-data-table__row'
            celda1.className = 'mdc-data-table__cell'
            celda2.className = 'mdc-data-table__cell'
            celda3.className = 'mdc-data-table__cell'
            celda4.className = 'mdc-data-table__cell no-print'
            celda5.className = 'mdc-data-table__cell no-print'

        
            celda.appendChild(textoCelda);
            celda1.appendChild(textoCelda1);
            celda2.appendChild(textoCelda2);
            celda3.appendChild(textoCelda3);
            celda4.innerHTML = `<textarea id="txt_comentario_${id}" ></textarea>`

            celda5.innerHTML = `
            <button onclick="deleteRow()" class="mdc-button mdc-button--raised mdc-button--leading" style="--mdc-ripple-fg-size: 75px; --mdc-ripple-fg-scale: 1.8784232240642684; --mdc-ripple-fg-translate-start: 16.41668701171875px, -7.866668701171875px; --mdc-ripple-fg-translate-end: 25.416671752929688px, -19.5px;">
                                            
                                            <span class="mdc-button__ripple"></span>
                                            <i class="material-icons mdc-button__icon" aria-hidden="true">close</i>
                                            <span class="mdc-button__label">Eliminar</span>
            </button>`
            hilera.appendChild(celda);
            hilera.appendChild(celda1);
            hilera.appendChild(celda2);
            hilera.appendChild(celda3);
            hilera.appendChild(celda4);
            hilera.appendChild(celda5);
            hilera.id =    id                     
            Tbl.appendChild(hilera);
        }
        
    

    function deleteRow() {
   
      var td = event.target.parentNode; 
      var tr = td.parentNode.parentNode; // the row to be removed
      tr.remove()
    }


    function savePlan(){

   
      var resume_table_fase1 = document.getElementById("tablaPlan_1");
      var resume_table_fase2 = document.getElementById("tablaPlan_2");
      let services = [];
      
      if (resume_table_fase1.rows.length !=0){

        for (var i = 0, row; row = resume_table_fase1.rows[i]; i++) {
          //alert(cell[i].innerText); 
          inicio = resume_table_fase1.rows[i].cells[2].innerHTML;
          final = resume_table_fase1.rows[i].cells[3].innerHTML;
          id = resume_table_fase1.rows[i].id;
          comentario = document.getElementById("txt_comentario_"+ id).value.trim() || null
          services.push ({service:id,fecha_inicio:inicio,fecha_final:final,fase:1,comentario:comentario})
        }
        console.log(services)
      }else{
        alert('Seleccione servicios en la fase 1')
        return false
      }
 
      if (resume_table_fase2.rows.length !=0){

        for (var i = 0, row; row = resume_table_fase2.rows[i]; i++) {
        
          inicio = resume_table_fase2.rows[i].cells[2].innerHTML;
          final = resume_table_fase2.rows[i].cells[3].innerHTML;
          id = resume_table_fase2.rows[i].id;
          comentario = document.getElementById("txt_comentario_"+ id).value.trim() || null
          services.push ({service:id,fecha_inicio:inicio,fecha_final:final,fase:2,comentario:comentario})
        }
        console.log(services)
      }

      const Swal = swcms.returnSwal()
      var resume_table = document.getElementById("tbl_plan");
      var txt_company_name = document.getElementById("txt_company_name").value.trim() || null
      var txt_company_rtn = document.getElementById("txt_company_rtn").value.trim() || null


      let postData = {
      "txt_company_id": "{{ company.id }}",
      "txt_company_name": txt_company_name,
      "txt_company_rtn": txt_company_rtn,
      "txt_identidad":"{{ api.IDENTIDAD }}",
      "services": JSON.stringify(services)
      };
      console.log(postData)
      let apiUrl = '/api/save/action/plan/';
      //document.getElementById('submitSaveButton').disabled = true;

      swcms.postFetch(apiUrl, postData).then((data) => {
        Swal.fire(
          'Éxito',
          'Plan de Acción creado!',
          'success'
        )
        window.setTimeout(() => { window.location.reload(); }, 1500);
    
      }).catch((error) => {
        Swal.fire(
          'Error de conexión',
          'Por favor revisar tu conexión a internet, si el problema persiste contacta al administrador del sistema',
          'error'
        )
        //document.getElementById('submitSaveButton').disabled = false;
      });
      window.print()

    }

    function printPlan(){
      window.print()
    }

    function formatDate(date) {
        return [
          padTo2Digits(date.getDate()),
          padTo2Digits(date.getMonth() + 1),
          date.getFullYear(),
        ].join('/');
      }

      function deleteActionPlan(actionPlan) {
        const Swal = swcms.returnSwal()

        Swal.fire({
          title: 'Escriba la razón del porqué cancela el servicio ',
          input: 'textarea',
          inputAttributes: {
            autocapitalize: 'off'
          },
          showCancelButton: true,
          confirmButtonText: 'Eliminar servicio',
          showLoaderOnConfirm: true,

        }).then(function(result) {

          if (!result.value) {
              Swal.fire('Escriba la razón del porqué cancela el servicio')
          }else{
            
              let postData = {
              "actionPlan": actionPlan,
              "cancelledReason":result.value
              };
              console.log(postData)
              let apiUrl = '/api/save/action/delete/';
              
              swcms.postFetch(apiUrl, postData).then((data) => {
              Swal.fire(
                'Éxito',
                'Plan de Acción Eliminado!',
                'success'
              )
              window.setTimeout(() => { window.location.reload(); }, 1500);
            
              }).catch((error) => {
                Swal.fire(
                  'Error de conexión',
                  'Por favor revisar tu conexión a internet, si el problema persiste contacta al administrador del sistema',
                  'error'
                )
                //document.getElementById('submitSaveButton').disabled = false;
              });
          }
        })

        return false

      }
</script>
{% endblock %}

