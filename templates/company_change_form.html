{% extends 'layout_main-drawer--dismissible_footer_topbar.html' %}
{% block page_description %}Innova, Innova Mujer, conexión innova, Servicios, Buscar, Profesional, Mercado, Talento{% endblock %}
{% block page_title %}Marketplace - Innova{% endblock %}
{% block body %}
<style>
    .mdc-card__media--square::before {
  margin-top: 0px !important;
}

.video {
  width: 100%;
  height: 400px;
  border: 1px solid red;
  overflow: hidden;
  position: relative;
}
#output1 {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}
</style>
<main class="s-main-content">
    <div class="container-color-background container-size-m">


        <div class="mdc-layout-grid">


       
            <div class="mdc-layout-grid__inner">
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12">
                    <div class="container-dashboard--card-info">
                        <div class="mdc-card mdc-card--color-on-primary">
                            <div class="mdc-card__content">
                                <p>
                                    <b>Nombre de la empresa:</b>
                                    {{ company.name }}
                                </p>
                                <p>
                                    <b>DNI Empresaria:</b>
                                    {{ company.dni }}
                                </p>
                                <p>
                                    <b>RTN :</b>
                                    {{ company.rtn }}
                                </p>
                                <p>
                                    <b>Direccion:</b>
                                    {{ company.address }}
                                </p>
                            </div>
    
                        </div>
                    </div>
                </div>

              <div class="mdc-layout-grid__cell--span-12-desktop mdc-layout-grid__cell--span-12-phone">
                <div class="mdc-card  mdc-card--color-on-primary">
                    <div class="mdc-card__primary-action" >
                      <div class="mdc-card__media mdc-card__media--square">
                        <div class="mdc-layout-grid">
                            <div class="mdc-layout-grid">
                                <div class="mdc-layout-grid__inner">

                                  <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12-desktop mdc-layout-grid__cell--span-4-tablet 
                                  mdc-layout-grid__cell--span-12-phone mdc-layout-grid__cell--align-middle">

                                    
                                    <h2>
                                        Formulario de edición de etapa
                                    </h2>
                           
                                    <form id="formPIC"  action = "" method="POST" enctype = "multipart/form-data">
                                    <input type="hidden" id="txt_company_id" name="txt_company_id"  value="{{company.id}}">
                    
                                    <input type="hidden"  name="txt_document_version" value="1">
                                    <div class="mdc-layout-grid__cell--span-4-desktop mdc-layout-grid__cell--span-12-phone">
                                           

                                      <div class="mdc-typography--body1">
                                        Etapa:
                                      </div>
                                      <div class="mdc-select mdc-select--filled demo-width-class"  id="txt_status" data-assigned-var>
                                          <div class="mdc-select__anchor"
                                               role="button"
                                               aria-haspopup="listbox"
                                               aria-expanded="false"
                                               aria-labelledby="demo-label demo-selected-text">
                                            <span class="mdc-select__ripple"></span>
                                            <span id="demo-label" class="mdc-floating-label">Etapa</span>
                                            <span class="mdc-select__selected-text-container">
                                              <span id="demo-selected-text" class="mdc-select__selected-text"></span>
                                            </span>
                                            <span class="mdc-select__dropdown-icon">
                                              <svg
                                                  class="mdc-select__dropdown-icon-graphic"
                                                  viewBox="7 10 10 5" focusable="false">
                                                <polygon
                                                    class="mdc-select__dropdown-icon-inactive"
                                                    stroke="none"
                                                    fill-rule="evenodd"
                                                    points="7 10 12 15 17 10">
                                                </polygon>
                                                <polygon
                                                    class="mdc-select__dropdown-icon-active"
                                                    stroke="none"
                                                    fill-rule="evenodd"
                                                    points="7 15 12 10 17 15">
                                                </polygon>
                                              </svg>
                                            </span>
                                            <span class="mdc-line-ripple"></span>
                                          </div>
                                        
                                          <div class="mdc-select__menu mdc-menu mdc-menu-surface mdc-menu-surface--fullwidth">
                                            <ul class="mdc-deprecated-list" role="listbox" aria-label="Food picker listbox">
                                                    {% for status in status %}
                                                      <li class="mdc-deprecated-list-item mdc-deprecated-list-item--selected" aria-selected="false" data-value="{{ status.name_short }}" role="option">
                                                          <span class="mdc-deprecated-list-item__ripple"></span>
                                                          <span class="mdc-deprecated-list-item__text">
                                                          {{ status.name }}
                                                          </span>
                                                      </li>
                                                    {% endfor %}
                                       
                                            </ul>
                                          </div>
                                        </div>
                                    </div>
                              
                                    <br><br><br>
                                    
                                    
            

                                    <div class="s-font-align-center">
                                        <button onclick="actualizarEtapa()" type="button" class="mdc-button mdc-button--raised mdc-button--leading mdc-button--color-secondary" >
                                            
                                            <span class="mdc-button__ripple"></span>
                                            <i class="material-icons mdc-button__icon" aria-hidden="true">check</i>
                                            <span class="mdc-button__label">Actualizar etapa</span>
                                        </button>
                                    </div>
                                    </form>    
                                    
  
                        



            
                           

                      </div>
                                 
                                </div>
                              </div>
                        </div>
                      </div>
                      <!-- ... additional primary action content ... -->
                      <div class="mdc-card__ripple"></div>
                    </div>


                    <br>
                    <br>
                  </div>
              </div>
            </div>
            
          </div>
     
        <div class="container-marketplace--drawer-app-content mdc-drawer-app-content mdc-top-app-bar--fixed-adjust">

            
        </div>
    </div>
</main>
{% endblock %}
{% block body_script_section %}
<script src="{{ url_for('static', filename='js/bundle/marketplace.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/dc.js') }}"></script>
<script src="{{ url_for('static', filename='js/admin.js') }}"></script>

<script>
  function actualizarEtapa1(){

const Swal = swcms.returnSwal()


let postData = {
  "txt_documente_id":"{{ company.id }}"
};

console.log(postData)

let apiUrl = '/api/aprobar/documento/';


swcms.postFetch(apiUrl, postData).then((data) => {
  Swal.fire(
  'Éxito',
  'Documento aprobado',
  'success'
  )
  window.setTimeout(() => { window.location.reload(); }, 1500);

}).catch((error) => {
  Swal.fire(
  'Error de conexión',
  'Por favor revisar tu conexión a internet, si el problema persiste contacta al administrador del sistema',
  'error'
  )
  document.getElementById('btn_generar_carta').disabled = false;
});

}
</script>
{% endblock %}