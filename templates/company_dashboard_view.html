{% extends 'layout_main-drawer--dismissible_footer_topbar.html' %}
{% block page_description %}Innova Mujer Home, Casa, Dashboard, Home{% endblock %}
{% block page_title %}Innova Mujer Home{% endblock %}
{% block css_script_section %}
<style>
    .alignleft {
	float: left;
}
.alignright {
	float: right;
}
.mdc-deprecated-list-item__secondary-text{
    white-space: initial;
    margin-bottom: 10px;
}
.mdc-deprecated-list--two-line .mdc-deprecated-list-item__text {
  align-self:flex-end
}



.accordion:hover {
  color: #952d98;
}
.active, .accordion:hover {
  background-color: white; 
  color: #952d98;
}

.panel {
  padding: 0 18px;
  display: none;
  background-color: white;
  overflow: hidden;
  color: #665;
}

.accordion:after {
  content: '\02795'; /* Unicode character for "plus" sign (+) */
  font-size: 13px;
  color: #777;
  float: right;
  margin-left: 5px;
}

.active:after {
  content: "\2796"; /* Unicode character for "minus" sign (-) */
}

.section-questions{
  padding-bottom: 20px;
  width: 89%;
  text-align: justify;
  margin: 0 auto;
  list-style: none;
}
.mdc-typography-questions{
  font-size: 1.3em;
  margin: 0px
}

 .active .s-font-color-questions{
  color:#952d98 !important
}

.s-font-color-questions {
  color:white
}

.s-font-color-questions:hover {
  color:#952d98
}
.s-font-color-questions .active{
  color:white
}

.box {
  display: flex;
}
.push {
    margin-left: auto;
}

.alignleft {
	float: left;
}
.alignright {
	float: right;
}
ul,li{
    list-style: none;
}
    </style>
</style>
{% endblock %}
{% block body %}
<main class="s-main-content">
    <div class="container-color-background">
        <div class="mdc-layout-grid container-size-s">
            <div class="mdc-layout-grid__inner">
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-4-desktop mdc-layout-grid__cell--span-4-tablet 
                            mdc-layout-grid__cell--align-middle">
                    <div class="container-dashboard--profile">
                        <div class="mdc-card mdc-card--color-on-primary">
                            <div class="mdc-card__primary-action" tabindex="0">
                                <div class="mdc-card__media">
                                    {% if company.users.avatar %}
                                    <img class="profile-background" src="{{ url_for('static', filename='upload/') }}{{company.users.avatar}}" alt="Border Perfil" />

                                    {% else %}
                                    <img class="profile-background" src="../../static/images/manifest/innova_perfil.svg" alt="Border Perfil" />
                                    <img class="profile-pic" src="../../static/images/manifest/innova_icon.svg" alt="Foto Perfil" />
                                    {% endif %}
                                </div>
                                <div class="mdc-card__ripple"></div>
                            </div>
                            <div class="mdc-card__content">
                                <div class="mdc-typography--headline5 s-font-color-secondary">
                                    {% if company.name %}
                                        {{ company.name }}
                                    {% endif %}
                                    

                                </div>
                              
                                <div class="mdc-typography--subtitle1">
                                    <i class="material-icons s-font-color-primary">verified_user</i>
                                    Empresaria 
                                </div>
                                {% if  company.names %}
                                <div class="mdc-typography--subtitle1">
                                    <i class="material-icons s-font-color-primary">business</i>
                                    
                                    {{ company.names }}
                                </div>
                                {% endif %}

                            </div>
                            <div class="mdc-card__actions">
                                <div class="mdc-card__actions-buttons"></div>
                                <div class="mdc-card__action-icons">
                                    <a href="/form/perfil" class="mdc-icon-button material-icons mdc-card__action mdc-card__action--icon">
                                        <div class="mdc-icon-button__ripple"></div>
                                        edit
                                    </a>
                                    


                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-8-desktop mdc-layout-grid__cell--span-4-tablet">
                    <div class="container-dashboard--messages">
                        <div class="mdc-card mdc-card--color-on-primary">
                            <div class="mdc-tab-bar" role="tablist" data-action-fn="showMessagesContracts">
                                <div class="mdc-tab-scroller">
                                    <div class="mdc-tab-scroller__scroll-area">
                                        <div class="mdc-tab-scroller__scroll-content">
                                            <button class="mdc-tab mdc-tab--active" role="tab" aria-selected="true" tabindex="0">
                                                <span class="mdc-tab__content">
                                                    <span class="mdc-tab__text-label">Mensajes</span>
                                                </span>
                                                <span class="mdc-tab-indicator mdc-tab-indicator--active">
                                                    <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>
                                                </span>
                                                <span class="mdc-tab__ripple"></span>
                                            </button>
                                            <button class="mdc-tab" role="tab" aria-selected="true" tabindex="1">
                                                <span class="mdc-tab__content">
                                                    <span class="mdc-tab__text-label">Preguntas frecuentes</span>
                                                </span>
                                                <span class="mdc-tab-indicator">
                                                    <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>
                                                </span>
                                                <span class="mdc-tab__ripple"></span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mdc-card__content container-dashboard--messages-msg">

    
                                <ul class="mdc-deprecated-list mdc-deprecated-list--two-line mdc-list--avatar-list">


                                {% if  carta.signed_innova %}
                                    {% if not carta.signed %}
                                    <a href="{{ url_for('digitalcenter._company_document_user',document_id=carta.id) }}" >
                                        <li class="mdc-deprecated-list-item" tabindex="0">
                                            <span class="mdc-deprecated-list-item__ripple"></span>
                                            <span class="mdc-deprecated-list-item__graphic" aria-hidden="true">
                                                <img src="../static/images/manifest/user_f.svg" alt="Foto Usuario" />
                                            </span>
                                            <span class="mdc-deprecated-list-item__text">
                                                <span class="mdc-deprecated-list-item__primary-text">Carta de compromiso pendiente de firma</span>
                                            {% if carta.created_by %}
                                                <span class="mdc-deprecated-list-item__secondary-text">{{ carta.created_by }}</span>
                                            {% else %}
                                                <span class="mdc-deprecated-list-item__secondary-text">Admin</span>
                                            {% endif %}
                                            </span>
                                            <span class="mdc-deprecated-list-item__meta material-icons s-font-color-secondary" aria-hidden="true">new_releases</span>
                                        </li>

                                    </a>

                                    {% endif %}
                                {% endif %}
                                </ul>
                                <!--
                                <ul class="mdc-deprecated-list mdc-deprecated-list--two-line mdc-list--avatar-list">
                                    <li class="mdc-deprecated-list-item" tabindex="0">
                                        <span class="mdc-deprecated-list-item__ripple"></span>
                                        <span class="mdc-deprecated-list-item__graphic" aria-hidden="true">
                                            <img src="../static/images/manifest/user_f.svg" alt="Foto Usuario" />
                                        </span>
                                        <span class="mdc-deprecated-list-item__text">
                                            <span class="mdc-deprecated-list-item__primary-text">Hola! Tal como acordamos, acá le comparto el logo para CompraNow</span>
                                            <span class="mdc-deprecated-list-item__secondary-text">Admin Innova</span>
                                        </span>
                                        <span class="mdc-deprecated-list-item__meta material-icons s-font-color-secondary" aria-hidden="true">new_releases</span>
                                    </li>
                                    <li role="separator" class="mdc-deprecated-list-divider"></li>
                                    <li class="mdc-deprecated-list-item">
                                        <span class="mdc-deprecated-list-item__ripple"></span>
                                        <span class="mdc-deprecated-list-item__graphic material-icons" aria-hidden="true">notifications</span>
                                        <span class="mdc-deprecated-list-item__text">
                                            <span class="mdc-deprecated-list-item__primary-text">Recuerda usar los créditos de tu Wallet para gozar de mayores beneficios en Innova Mujer.</span>
                                            <span class="mdc-deprecated-list-item__secondary-text">Notificación Innova</span>
                                        </span>
                                    </li>

                                    <li role="separator" class="mdc-deprecated-list-divider"></li>
                                </ul>-->
                            </div>
                            <div class="mdc-card__content container-dashboard--messages-cnt container--hidden">
                                <div class="container-dashboard--messages-list-empty">
                                    <ul class="mdc-deprecated-list mdc-deprecated-list--two-line mdc-list--avatar-list">

                                        <li class="mdc-deprecated-list-item">
                                            <span class="mdc-deprecated-list-item__ripple"></span>
                                            <span class="mdc-deprecated-list-item__graphic material-icons" aria-hidden="true">library_books</span>
                                            <span class="mdc-deprecated-list-item__text">
                                                <span class="mdc-deprecated-list-item__primary-text">Como llenar el formulario de inscripción.</span>
                                                <span class="mdc-deprecated-list-item__secondary-text">Admin Innova</span>
                                            </span>
                                        </li>
                                        <li role="separator" class="mdc-deprecated-list-divider"></li>
                                        <li class="mdc-deprecated-list-item">
                                            <span class="mdc-deprecated-list-item__ripple"></span>
                                            <span class="mdc-deprecated-list-item__graphic material-icons" aria-hidden="true">play_arrow</span>
                                            <span class="mdc-deprecated-list-item__text">
                                                <span class="mdc-deprecated-list-item__primary-text">Como llenar el formulario de inscripción.</span>
                                                <span class="mdc-deprecated-list-item__secondary-text">Admin Innova</span>
                                            </span>
                                        </li>
                                        <li role="separator" class="mdc-deprecated-list-divider"></li>
                                        <li class="mdc-deprecated-list-item">
                                            <span class="mdc-deprecated-list-item__ripple"></span>
                                            <span class="mdc-deprecated-list-item__graphic material-icons" aria-hidden="true">play_arrow</span>
                                            <span class="mdc-deprecated-list-item__text">
                                                <span class="mdc-deprecated-list-item__primary-text">Como contactar a un especialista.</span>
                                                <span class="mdc-deprecated-list-item__secondary-text">Admin Innova</span>
                                            </span>
                                        </li>
      
                                    </ul>
                                </div>
                            </div>
                            <div class="mdc-card__actions">
                                <div class="mdc-card__actions-buttons">
                                </div>
                                <div class="mdc-card__action-icons">
                                    <button class="mdc-icon-button material-icons mdc-card__action mdc-card__action--icon">
                                        <div class="mdc-icon-button__ripple"></div>
                                        more_vert
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!---->
    <div class="container-color-background">
        <div class="mdc-layout-grid container-size-s">
            <div class="mdc-layout-grid__inner">
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6">
                    <div class="container-dashboard--card-info">
                        <div class="mdc-card mdc-card--color-on-primary">
                            <div class="mdc-card__content">
                                <div class="mdc-typography--headline5 s-font-color-secondary">Documentación</div>
                                {% if carta %}
                                <div class="mdc-typography--headline5 s-font-color-secondary">Carta de compromio</div>
                                <table class="mdc-data-table__table_normal" aria-label="Dessert calories" style="width: 100%;">
                                    <thead>
                                      <tr class="mdc-data-table__header-row">
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">#</th>
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">OPCIONES</th>
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">DOCUMENTO</th>
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">FIRMADO ASESORA</th>
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">FIRMADO POR LA EMPRESA</th>
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">ESTADO</th>
                                      </tr>
                                      
                                      
                                      
                                    </thead>
                                    <tbody class="mdc-data-table__content">
                                                                             
                                      <tr class="mdc-data-table__row">
                                        <th class="mdc-data-table__cell" scope="row">
                                           1
                                        </th>
                                        <th class="mdc-data-table__cell" scope="row">
                                            <a target="_blank" href="{{ url_for('static', filename='upload/') }}{{carta.document_local}}"  class="s-font-align-center mdc-button mdc-button--raised mdc-button--leading" style="--mdc-ripple-fg-size: 75px; --mdc-ripple-fg-scale: 1.8784232240642684; --mdc-ripple-fg-translate-start: 16.41668701171875px, -7.866668701171875px; --mdc-ripple-fg-translate-end: 25.416671752929688px, -19.5px;">
                                        
                                                <span class="mdc-button__ripple"></span>
                                                <i class="material-icons mdc-button__icon" aria-hidden="true">check</i>
                                                <span class="mdc-button__label">Ver documento</span>
                                            </a>
                                 
                                        </th>
                                        <td class="mdc-data-table__cell " scope="row">
                                            carta de compromiso
                                        </td>
                                        <td class="mdc-data-table__cell " scope="row">
                                            {% if carta.signed_innova %}
                                                FIRMADO
                                            {% else %}
                                                NO FIRMADO
                                            {% endif %}
                                        </td>
                                        <td class="mdc-data-table__cell " scope="row">
                                            {% if carta.signed %}
                                                FIRMADO
                                            {% else %}
                                                NO FIRMADO
                                            {% endif %}
                                        </td>
                                        

                                        <td class="mdc-data-table__cell " scope="row">
                                            {% if carta.complete %}
                                                COMPLETADO
                                            {% else %}
                                                NO COMPLETADO
                                            {% endif %}
                                            
                                        </td>
                                      </tr>


                                    </tbody>
                                  </table>
                                {% endif %}

                            
                                {% if ficha %}
                                <div class="mdc-typography--headline5 s-font-color-secondary">Ficha de inscripción</div>
                                <table class="mdc-data-table__table_normal" aria-label="Dessert calories" style="width: 100%;">
                                    <thead>
                                      <tr class="mdc-data-table__header-row">
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">#</th>
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">OPCIONES</th>
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">DOCUMENTO</th>
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">FIRMADO ASESORA</th>
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">FIRMADO POR LA EMPRESA</th>
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">ESTADO</th>
                                      </tr>
                                      
                                      
                                      
                                    </thead>
                                    <tbody class="mdc-data-table__content">
                                                                             
                                      <tr class="mdc-data-table__row">
                                        <th class="mdc-data-table__cell" scope="row">
                                           1
                                        </th>
                                        <th class="mdc-data-table__cell" scope="row">
                                            <a target="_blank" href="{{ url_for('static', filename='upload/') }}{{ficha.document_local}}"  class="s-font-align-center mdc-button mdc-button--raised mdc-button--leading" style="--mdc-ripple-fg-size: 75px; --mdc-ripple-fg-scale: 1.8784232240642684; --mdc-ripple-fg-translate-start: 16.41668701171875px, -7.866668701171875px; --mdc-ripple-fg-translate-end: 25.416671752929688px, -19.5px;">
                                        
                                                <span class="mdc-button__ripple"></span>
                                                <i class="material-icons mdc-button__icon" aria-hidden="true">check</i>
                                                <span class="mdc-button__label">Ver documento</span>
                                            </a>
                                       
                                        </th>
                                        <td class="mdc-data-table__cell " scope="row">
                                            Ficha de inscripcion
                                        </td>
                                        <td class="mdc-data-table__cell " scope="row">
                                            {% if carta.signed_innova %}
                                                FIRMADO
                                            {% else %}
                                                NO FIRMADO
                                            {% endif %}
                                        </td>
                                        <td class="mdc-data-table__cell " scope="row">
                                            {% if carta.signed %}
                                                FIRMADO
                                            {% else %}
                                                NO FIRMADO
                                            {% endif %}
                                        </td>
                                        

                                        <td class="mdc-data-table__cell " scope="row">
                                            {% if carta.complete %}
                                                COMPLETADO
                                            {% else %}
                                                NO COMPLETADO
                                            {% endif %}
                                            
                                        </td>
                                      </tr>


                                    </tbody>
                                </table>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6">
                    <div class="container-dashboard--card-info">
                        <div class="mdc-card mdc-card--color-on-primary">
                            <div class="mdc-card__content">

                                <div class="mdc-typography--headline5 s-font-color-secondary">Lista de cursos</div>
                                <div class="mdc-data-table__table-container">
                                    <table class="mdc-data-table__table_normal" aria-label="Dessert calories">
                                        <thead>
                                        <tr class="mdc-data-table__header-row">
                                            <th class="mdc-data-table__header-cell mdc-data-table__header-cell--checkbox" role="columnheader" scope="col">
                                                #
                                            </th>
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Nombre de la formación</th>
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Tipo de formación</th>
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Tipo de modalidad</th>
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Responsable</th>
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Fecha Inicial </th>
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Fecha Final</th>
                                          
                                    
                                        </tr>
                                        
                                        
                                        
                                        </thead>
                                        <tbody class="mdc-data-table__content">
                                            {% for curso in enrolls %}
                                        <tr data-row-id="u0" class="mdc-data-table__row">
                                            <td class="mdc-data-table__cell mdc-data-table__cell--checkbox">
                                                {{loop.index}}
                                            </td>   
                                            <th class="mdc-data-table__cell" scope="row" id="u0">
                                                {{ curso.course.name }}
                                            </th>
                                            <td class="mdc-data-table__cell"> {{ curso.course.training_type.name }}</td>
                                            <td class="mdc-data-table__cell"> {{ curso.course.modality_type.name }}</td>
                                            <td class="mdc-data-table__cell"> {{ curso.course.course_managers.name }}</td>
                                            <td class="mdc-data-table__cell"> {{ curso.course.date_scheduled_start.strftime('%Y-%m-%d') }}</td>
                                            <td class="mdc-data-table__cell"> {{ curso.course.date_scheduled_end.strftime('%Y-%m-%d') }}</td>
                                        </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-7-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-12-phone">
                    <div class="container-dashboard--card-info">
                        <div class="mdc-card mdc-card--color-on-primary">
                            <div class="mdc-card__content">
                                <div class="mdc-typography--headline5 s-font-color-secondary">Plan de acción</div>
                                <br>
                                {% for plan in plan_action %}
                                    <div class="section-questions">
                                        <a class="accordion" >
                                            <span  style="font-weight: bold;">{{plan['catalog_name']}}</span>
                                            
                                        </a>
                                        <div class="panel">
                                            {% for action in plan['plan_action'] %}  
                                 
                                            <div class="demo-linear-progress-indicator">
                                                    
                                                <div id="textbox">
                                                    <p style="font-weight: bold" class="alignleft">
                                                        {{action.services.name}}
                                                    </p>
                                                    <p class="alignright">{{action.progress}} / 100</p>
                                                </div>
                                                <div role="progressbar" class="mdc-linear-progress "><div class="mdc-linear-progress__buffering-dots"></div>
                                                <div class="mdc-linear-progress__buffer" style="transform: scaleX({{action.progress/100}});">
                                                </div>
                                                <div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar" style="transform: scaleX({{action.progress/100}});">
                                                    <span class="mdc-linear-progress__bar-inner"></span>
                                                </div>
                                                <div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar">
                                                    <span class="mdc-linear-progress__bar-inner"></span></div>
                                                </div>
                                                <center>
                                                    <br>
                                                    {% if action.progress == 100 %}
                                                        <a onclick="alert('En construcción')"  class="mdc-button mdc-button--raised mdc-button--icon-leading mdc-button--color-secondary" aria-label="Evaluar" alt="Evaluar">
                                                            <span class="mdc-button__ripple"></span>
                                                            <i class="material-icons mdc-button__icon" aria-hidden="true">person</i>
                                                            <span class="mdc-button__label">Evaluar servicio</span>
                                                        </a>
                                                    {% elif action.progress == 0 %}
                                                    {% else %}
                                                        <a onclick="alert('En construcción')" class="mdc-button mdc-button--raised mdc-button--icon-leading" aria-label="bitácora" alt="bitácora">
                                                            <span class="mdc-button__ripple"></span>
                                                            <i class="material-icons mdc-button__icon" aria-hidden="true">app_registration</i>
                                                            <span class="mdc-button__label">Ver bitácora de actividades</span>
                                                        </a>
                                                    {% endif %}
                                                    
                                                </center>
                                            </div>
                                            <br>
            
                                            <p class="mdc-deprecated-list-divider"></p>
                                            {% endfor %}
                                        
                                        </div>
                                    </div>
                                {% endfor %}
                             
             
                              
                            </div>
                            <div class="mdc-card__actions">
                                <div class="mdc-card__actions-buttons"></div>
                                <div class="mdc-card__action-icons">
                                    <button class="mdc-icon-button material-icons mdc-card__action mdc-card__action--icon">
                                        <div class="mdc-icon-button__ripple"></div>
                                        more_vert
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-5-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-12-phone">
                    <div class="container-dashboard--card-info">
                        <div class="mdc-card mdc-card--color-on-primary">
                            <div class="mdc-card__content">
                                <div class="mdc-typography--headline5 s-font-color-secondary">Billetera</div>
                    
                                <div class="section-questions">
                                    <a class="accordion" >
                                        <li class="mdc-deprecated-list-item" tabindex="0">
                                            <span class="mdc-deprecated-list-item__ripple"></span>
                                            <span class="mdc-deprecated-list-item__graphic material-icons s-font-color-secondary" aria-hidden="true">account_balance_wallet</span>
                                            <span class="mdc-deprecated-list-item__text">
                                               
                                                <span class="mdc-deprecated-list-item__secondary-text">Crédito obtenido</span>
                                            </span>
                                            <span class="mdc-deprecated-list-item__meta s-font-color-secondary" aria-hidden="true">$ {{ deposits_total.total }}</span>
                                        </li>
                                    </a>
                                    <div class="panel">
                       
                                        <ul class="mdc-typography--overline">
                                            <li role="separator" class="mdc-deprecated-list-divider"></li>
                                            {% for transaction in deposits %}
                                            <li class="mdc-deprecated-list-item" tabindex="0">
                                                <span class="mdc-deprecated-list-item__ripple"></span>
                                                
                                                <span class="mdc-deprecated-list-item__text">
                                                    
                                                    <span class="mdc-deprecated-list-item__secondary-text"> {{ transaction.date_created }} -<br>
                                                        {{ transaction.services.name }}</span>
                                                </span>
                                                <span class="mdc-deprecated-list-item__meta s-font-color-secondary" aria-hidden="true">+ $ {{ transaction.amount }}</span>
                                            </li>
                                            {% endfor %}
                                            <li role="separator" class="mdc-deprecated-list-divider"></li>
 
                                        </ul>
                                      
                                    </div>
                                </div>
                            
                                <br>
                                <div class="section-questions">
                                    <a class="accordion" >
                                        <li class="mdc-deprecated-list-item" tabindex="0">
                                            <span class="mdc-deprecated-list-item__ripple"></span>
                                            <span class="mdc-deprecated-list-item__graphic material-icons s-font-color-secondary" aria-hidden="true">account_balance_wallet</span>
                                            <span class="mdc-deprecated-list-item__text">
                                               
                                                <span class="mdc-deprecated-list-item__secondary-text">Crédito en proceso</span>
                                            </span>
                                            <span class="mdc-deprecated-list-item__meta s-font-color-secondary" aria-hidden="true">$ {{ withdrawals_progress_total.total }}</span>
                                        </li>
                                    </a>
                                    <div class="panel">
                       
                                        <ul class="mdc-typography--overline">
                                            <li role="separator" class="mdc-deprecated-list-divider"></li>
                                            {% for transaction in withdrawals_progress %}
                                            <li class="mdc-deprecated-list-item" tabindex="0">
                                                <span class="mdc-deprecated-list-item__ripple"></span>
                                                
                                                <span class="mdc-deprecated-list-item__text">
                                                    
                                                    <span class="mdc-deprecated-list-item__secondary-text"> {{ transaction.date_created }} -<br>
                                                        {{ transaction.services.name }}</span>
                                                </span>
                                                <span class="mdc-deprecated-list-item__meta s-font-color-secondary" aria-hidden="true">+ $ {{ transaction.amount }}</span>
                                            </li>
                                            {% endfor %}
                                            <li role="separator" class="mdc-deprecated-list-divider"></li>
 
                                        </ul>
                                      
                                    </div>
                                </div>
                                <br>
                                <div class="section-questions">
                                    <a class="accordion" >
                                        <li class="mdc-deprecated-list-item" tabindex="0">
                                            <span class="mdc-deprecated-list-item__ripple"></span>
                                            <span class="mdc-deprecated-list-item__graphic material-icons s-font-color-secondary" aria-hidden="true">account_balance_wallet</span>
                                            <span class="mdc-deprecated-list-item__text">
                                               
                                                <span class="mdc-deprecated-list-item__secondary-text">Crédito  completado</span>
                                            </span>
                                            <span class="mdc-deprecated-list-item__meta s-font-color-secondary" aria-hidden="true">$ {{ withdrawals_completed_total.total }}</span>
                                        </li>
                                    </a>
                                    <div class="panel">
                       
                                        <ul class="mdc-typography--overline">
                                            <li role="separator" class="mdc-deprecated-list-divider"></li>
                                            {% for transaction in withdrawals_completed %}
                                            <li class="mdc-deprecated-list-item" tabindex="0">
                                                <span class="mdc-deprecated-list-item__ripple"></span>
                                                
                                                <span class="mdc-deprecated-list-item__text">
                                                    
                                                    <span class="mdc-deprecated-list-item__secondary-text"> {{ transaction.date_created }} -<br>
                                                        {{ transaction.services.name }}</span>
                                                </span>
                                                <span class="mdc-deprecated-list-item__meta s-font-color-secondary" aria-hidden="true">+ $ {{ transaction.amount }}</span>
                                            </li>
                                            {% endfor %}
                                            <li role="separator" class="mdc-deprecated-list-divider"></li>
 
                                        </ul>
                                      
                                    </div>
                                </div>
                                <br>
                                <div class="section-questions">
                                    <a class="" >
                                        <li class="mdc-deprecated-list-item" tabindex="0">
                                            <span class="mdc-deprecated-list-item__ripple"></span>
                                            <span class="mdc-deprecated-list-item__graphic material-icons s-font-color-secondary" aria-hidden="true">account_balance_wallet</span>
                                            <span class="mdc-deprecated-list-item__text">
                                               
                                                <span class="mdc-deprecated-list-item__secondary-text">Crédito Actual</span>
                                            </span>
                                            <span class="mdc-deprecated-list-item__meta s-font-color-secondary" aria-hidden="true">$ {{ company.available_credit }}</span>
                                        </li>
                                    </a>
                              
                                </div>
                            </div>
                            <div class="mdc-card__actions">
                                <!---
                                <div class="mdc-card__actions-buttons">
                                    <button class="mdc-button mdc-button--raised mdc-button--color-secondary mdc-card__action
                                                mdc-card__action--button">
                                        <div class="mdc-button__ripple"></div>
                                        <span class="mdc-button__label">Redimir</span>
                                    </button>
                                </div>
                                <div class="mdc-card__action-icons">
                                    <button class="mdc-icon-button material-icons mdc-card__action mdc-card__action--icon">
                                        <div class="mdc-icon-button__ripple"></div>
                                        receipt
                                    </button>
                                    <button class="mdc-icon-button material-icons mdc-card__action mdc-card__action--icon">
                                        <div class="mdc-icon-button__ripple"></div>
                                        add_circle
                                    </button>

                                </div>
                                -->
                            </div>
                        </div>
                    </div>
                </div>
        
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-4-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-12-phone">
                </div>
            </div>
        </div>
    </div>
</main>

{% if diagnostico %} 
<main class="s-main-content">
    <div class="container-color-background">
        <div class="mdc-layout-grid container-size-s">
            <div class="mdc-layout-grid__inner">
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-12-phone">
                    <div class="container-dashboard--card-info">
                        <div class="mdc-card mdc-card--color-on-primary">
                            <div class="mdc-card__content">
                                <div class="mdc-typography--headline5 s-font-color-secondary">Resultados Iniciales</div>
                                <br>
                                <div class="mdc-data-table__table-container">
                                    <table class="mdc-data-table__table_normal" aria-label="Dessert calories">
                                        <thead>
                                        <tr class="mdc-data-table__header-row">
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">#</th>
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Área </th>
                                            <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Puntaje total del área</th>
                                            

                                            <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Ideales</th>
                                            <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Resultados</th>
                                        </tr>
                                        
                                        
                                        




                                        </thead>
                                        <tbody class="mdc-data-table__content">
                                        {% for resultado in diagnostico %}                              
                                        <tr class="mdc-data-table__row">
                                            <th class="mdc-data-table__cell" scope="row">
                                                {{loop.index}}
                                            </th>
                                            <th class="mdc-data-table__cell" scope="row">
                                                {{ resultado.area }}
                                            </th>
                                            <td class="mdc-data-table__cell mdc-data-table__header-cell--numeric" scope="row">
                                                {{ resultado.putaje_area }}
                                            </td>
                                            <td class="mdc-data-table__cell mdc-data-table__header-cell--numeric" scope="row">
                                                {{ resultado.ideales }}
                                            </td>
                                            <td class="mdc-data-table__cell mdc-data-table__header-cell--numeric" scope="row">
                                                {{ resultado.resultados }}  
                                            </td>     
                                        </tr>
                                        {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="mdc-card__actions">
                                <div class="mdc-card__actions-buttons"></div>
                                <div class="mdc-card__action-icons">
                                    <button class="mdc-icon-button material-icons mdc-card__action mdc-card__action--icon">
                                        <div class="mdc-icon-button__ripple"></div>
                                        more_vert
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-12-phone">
                    <div class="container-dashboard--card-info">
                        <div class="mdc-card mdc-card--color-on-primary">
                            <div class="mdc-card__content">
                                <div class="mdc-typography--headline5 s-font-color-secondary">Resultados Actuales</div>
                                <br>
                                <div class="mdc-data-table__table-container">
                                    <table class="mdc-data-table__table_normal" aria-label="Dessert calories">
                                        <thead>
                                        <tr class="mdc-data-table__header-row">
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">#</th>
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Área </th>
                                            <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Puntaje total del área</th>
                                            

                                            <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Ideales</th>
                                            <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Resultados</th>
                                        </tr>
                                        
                                        
                                        




                                        </thead>
                                        <tbody class="mdc-data-table__content">
                                        {% for resultado in diagnos_final %}                              
                                        <tr class="mdc-data-table__row">
                                            <th class="mdc-data-table__cell" scope="row">
                                                {{loop.index}}
                                            </th>
                                            <th class="mdc-data-table__cell" scope="row">
                                                {{ resultado.area }}
                                            </th>
                                            <td class="mdc-data-table__cell mdc-data-table__header-cell--numeric" scope="row">
                                                {{ resultado.putaje_area }}
                                            </td>
                                            <td class="mdc-data-table__cell mdc-data-table__header-cell--numeric" scope="row">
                                                {{ resultado.ideales }}
                                            </td>
                                            <td class="mdc-data-table__cell mdc-data-table__header-cell--numeric" scope="row">
                                                {{ resultado.resultados }}  
                                            </td>     
                                        </tr>
                                        {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="mdc-card__actions">
                                <div class="mdc-card__actions-buttons"></div>
                                <div class="mdc-card__action-icons">
                                    <button class="mdc-icon-button material-icons mdc-card__action mdc-card__action--icon">
                                        <div class="mdc-icon-button__ripple"></div>
                                        more_vert
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-12-phone">
                    <div class="container-dashboard--card-info">
                        <div class="mdc-card mdc-card--color-on-primary">
                            <div class="mdc-card__content">
                                <div class="mdc-typography--headline5 s-font-color-secondary">Resultados por categoría Iniciales</div>
                                <br>
                                <div id="curve_chart" ></div>

                            </div>
                            <div class="mdc-card__actions">
                                <div class="mdc-card__actions-buttons"></div>
                                <div class="mdc-card__action-icons">
                                    <button class="mdc-icon-button material-icons mdc-card__action mdc-card__action--icon">
                                        <div class="mdc-icon-button__ripple"></div>
                                        more_vert
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-12-phone">
                    <div class="container-dashboard--card-info">
                        <div class="mdc-card mdc-card--color-on-primary">
                            <div class="mdc-card__content">
                                <div class="mdc-typography--headline5 s-font-color-secondary">Resultados por categoría Actuales</div>
                                <br>
                                <div id="curve_chart_2" ></div>

                            </div>
                            <div class="mdc-card__actions">
                                <div class="mdc-card__actions-buttons"></div>
                                <div class="mdc-card__action-icons">
                                    <button class="mdc-icon-button material-icons mdc-card__action mdc-card__action--icon">
                                        <div class="mdc-icon-button__ripple"></div>
                                        more_vert
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-12-phone">
                    <div class="container-dashboard--card-info">
                        <div class="mdc-card mdc-card--color-on-primary">
                            <div class="mdc-card__content">
                                <div class="mdc-typography--headline5 s-font-color-secondary">Resultados por categoría Iniciales</div>
                                <br>
                    
                                <div id="donutchart"></div>

                            </div>
                            <div class="mdc-card__actions">
                                <div class="mdc-card__actions-buttons"></div>
                                <div class="mdc-card__action-icons">
                                    <button class="mdc-icon-button material-icons mdc-card__action mdc-card__action--icon">
                                        <div class="mdc-icon-button__ripple"></div>
                                        more_vert
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-12-phone">
                    <div class="container-dashboard--card-info">
                        <div class="mdc-card mdc-card--color-on-primary">
                            <div class="mdc-card__content">
                                <div class="mdc-typography--headline5 s-font-color-secondary">Resultados por categoría Actuales</div>
                                <br>
                    
                                <div id="donutchart_2"></div>

                            </div>
                            <div class="mdc-card__actions">
                                <div class="mdc-card__actions-buttons"></div>
                                <div class="mdc-card__action-icons">
                                    <button class="mdc-icon-button material-icons mdc-card__action mdc-card__action--icon">
                                        <div class="mdc-icon-button__ripple"></div>
                                        more_vert
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-12-phone">
                    <div class="container-dashboard--card-info">
                        <div class="mdc-card mdc-card--color-on-primary">
                            <div class="mdc-card__content">
                                <div class="mdc-typography--headline5 s-font-color-secondary">Resultado del diagnóstico Iniciales</div>
                                <br>
                                <div class="mdc-data-table__table-container">
                                    <table class="mdc-data-table__table_normal" aria-label="Dessert calories" style="width: 100%;">
                                        <thead>
                                        <tr class="mdc-data-table__header-row">
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">#</th>
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">TIPO EMPRESA </th>
                                            <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">RESULTADO</th>
                                        </tr>
                                        
                                        
                                        
                                        </thead>
                                        <tbody class="mdc-data-table__content">
                                                                                

                                        <tr class="mdc-data-table__row">
                                            {% for resultado in diagnostico %}    
                                            {% if resultado.id_area == 0  %}
            
                                            <th class="mdc-data-table__cell" scope="row">
                                            1
                                            </th>
                                            <th class="mdc-data-table__cell" scope="row">
                                                {{resultado.descripcion }}
                                            </th>
                                            <th class="mdc-data-table__cell mdc-data-table__header-cell--numeric" scope="row">
                                            
                                                {{resultado.resultados}} 
                                            </th>
                                            {% endif %}
                                            {% endfor %}
                                        </tr>

                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="mdc-card__actions">
                                <div class="mdc-card__actions-buttons"></div>
                                <div class="mdc-card__action-icons">
                                    <button class="mdc-icon-button material-icons mdc-card__action mdc-card__action--icon">
                                        <div class="mdc-icon-button__ripple"></div>
                                        more_vert
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-12-phone">
                    <div class="container-dashboard--card-info">
                        <div class="mdc-card mdc-card--color-on-primary">
                            <div class="mdc-card__content">
                                <div class="mdc-typography--headline5 s-font-color-secondary">Resultado del diagnóstico Actuales</div>
                                <br>
                                <div class="mdc-data-table__table-container">
                                    <table class="mdc-data-table__table_normal" aria-label="Dessert calories" style="width: 100%;">
                                        <thead>
                                        <tr class="mdc-data-table__header-row">
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">#</th>
                                            <th class="mdc-data-table__header-cell" role="columnheader" scope="col">TIPO EMPRESA </th>
                                            <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">RESULTADO</th>
                                        </tr>
                                        
                                        
                                        
                                        </thead>
                                        <tbody class="mdc-data-table__content">
                                                                                

                                        <tr class="mdc-data-table__row">
                                            {% for resultado in diagnos_final %}    
                                            {% if resultado.id_area == 0  %}
            
                                            <th class="mdc-data-table__cell" scope="row">
                                            1
                                            </th>
                                            <th class="mdc-data-table__cell" scope="row">
                                                {{resultado.descripcion }}
                                            </th>
                                            <th class="mdc-data-table__cell mdc-data-table__header-cell--numeric" scope="row">
                                            
                                                {{resultado.resultados}} 
                                            </th>
                                            {% endif %}
                                            {% endfor %}
                                        </tr>

                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="mdc-card__actions">
                                <div class="mdc-card__actions-buttons"></div>
                                <div class="mdc-card__action-icons">
                                    <button class="mdc-icon-button material-icons mdc-card__action mdc-card__action--icon">
                                        <div class="mdc-icon-button__ripple"></div>
                                        more_vert
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</main> 
{% endif %}


{% endblock %}
{% block body_script_section %}

    <script src="{{ url_for('static', filename='js/bundle/home-dashboard.min.js') }}"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    {% if diagnostico %} 

    <script type="text/javascript">
        window.addEventListener('load', function() {
            init();
        });
        window.addEventListener('resize', function() {
            init();
        });
    
        function init() {
            google.charts.load('current', { 'packages': ['corechart'] });
            google.charts.setOnLoadCallback(drawChart_line);
    
            function drawChart_line() {
                var data_li = google.visualization.arrayToDataTable([
                    ['AREA', 'IDEALES', 'RESULTADOS'],
                    {% for resultado in diagnostico %}    
                        {% if resultado.id_area != 0  %}
                        ['{{resultado.area}}', {{resultado.ideales}}, {{resultado.resultados}}],
                        {% endif %}
                    {% endfor %}
                ]);
    
                var options_li = {
                    title: 'RESULTADOS POR CATEGORIA',
                    curveType: 'function',
                    legend: { position: 'top' },
                    hAxis: {
                        textStyle: {
                            fontSize: 8, // Tamaño de fuente del eje x
                        },
                        slantedText: true, // Rotar el texto
                        slantedTextAngle: 45, // Ángulo de rotación (en grados)
                    },
                    height: 400 // Ajusta la altura del gráfico aquí
                };
    
                var chart_li = new google.visualization.LineChart(document.getElementById('curve_chart'));
                chart_li.draw(data_li, options_li);


                var data_li = google.visualization.arrayToDataTable([
                    ['AREA', 'IDEALES', 'RESULTADOS'],
                    {% for resultado in diagnos_final %}    
                        {% if resultado.id_area != 0  %}
                        ['{{resultado.area}}', {{resultado.ideales}}, {{resultado.resultados}}],
                        {% endif %}
                    {% endfor %}
                ]);
    
                var options_li = {
                    title: 'RESULTADOS POR CATEGORIA',
                    curveType: 'function',
                    legend: { position: 'top' },
                    hAxis: {
                        textStyle: {
                            fontSize: 8, // Tamaño de fuente del eje x
                        },
                        slantedText: true, // Rotar el texto
                        slantedTextAngle: 45, // Ángulo de rotación (en grados)
                    },
                    height: 400 // Ajusta la altura del gráfico aquí
                };
    
                var chart_li = new google.visualization.LineChart(document.getElementById('curve_chart_2'));
                chart_li.draw(data_li, options_li);
                
            }
    
            google.charts.load("current", { packages: ["corechart"] });
            google.charts.setOnLoadCallback(drawChart);
    
            function drawChart() {
                var data = google.visualization.arrayToDataTable([
                    ['AREA', 'RESULTADOS'],
                    {% for resultado in diagnos_final %}    
                        {% if resultado.id_area != 0  %}
                        ['{{resultado.area}}', {{resultado.resultados}}],
                        {% endif %}
                    {% endfor %}
                ]);
    
                var options = {
                    title: 'RESULTADOS POR CATEGORIA',
                    pieHole: 0.4,
                };
    
                var chart = new google.visualization.PieChart(document.getElementById('donutchart'));
                chart.draw(data, options);
    
                // Agrega un evento de redimensionamiento para actualizar el gráfico cuando cambie el tamaño de la ventana
                window.addEventListener('resize', resizeChart);
    
                // Función para ajustar el tamaño del gráfico
                function resizeChart() {
                    if (data && options) {
                        var chartContainer = document.getElementById('donutchart');
                        var chartWrapperWidth = chartContainer.offsetWidth;
                        var chartWrapperHeight = chartContainer.offsetHeight;
                        chart.draw(data, {
                            ...options,
                            width: chartWrapperWidth,
                            height: chartWrapperHeight
                        });
                    }
                }

                var data = google.visualization.arrayToDataTable([
                    ['AREA', 'RESULTADOS'],
                    {% for resultado in diagnostico %}    
                        {% if resultado.id_area != 0  %}
                        ['{{resultado.area}}', {{resultado.resultados}}],
                        {% endif %}
                    {% endfor %}
                ]);
    
                var options = {
                    title: 'RESULTADOS POR CATEGORIA',
                    pieHole: 0.4,
                };
    
                var chart = new google.visualization.PieChart(document.getElementById('donutchart_2'));
                chart.draw(data, options);
    
                // Agrega un evento de redimensionamiento para actualizar el gráfico cuando cambie el tamaño de la ventana
                window.addEventListener('resize', resizeChart);
    
                // Función para ajustar el tamaño del gráfico
                function resizeChart() {
                    if (data && options) {
                        var chartContainer = document.getElementById('donutchart');
                        var chartWrapperWidth = chartContainer.offsetWidth;
                        var chartWrapperHeight = chartContainer.offsetHeight;
                        chart.draw(data, {
                            ...options,
                            width: chartWrapperWidth,
                            height: chartWrapperHeight
                        });
                    }
                }
            }
        }
    </script>
    

    {% endif %}

    <script>
        function referirEmpresaria(action_id){
            const Swal = swcms.returnSwal()
            let txt_user_x = document.getElementById('txt_user_'+action_id).value 

            let postData = {
                "txt_action_id": action_id,
                "txt_user_x": txt_user_x,
                };
                console.log(postData)
                let apiUrl = '/api/created/reference/';
                //document.getElementById('submitSaveButton').disabled = true;

                swcms.postFetch(apiUrl, postData).then((data) => {
                    Swal.fire(
                    'Éxito',
                    'Plan de Acción creado!',
                    'success'
                    )
                    window.setTimeout(() => { window.location.reload(); }, 1500);
                
                }).catch((error) => {
                    Swal.fire(
                    'Error de conexión',
                    'Por favor revisar tu conexión a internet, si el problema persiste contacta al administrador del sistema',
                    'error'
                    )
                    //document.getElementById('submitSaveButton').disabled = false;
                });
        }



        var acc = document.getElementsByClassName("accordion");
var i;

for (i = 0; i < acc.length; i++) {
  acc[i].addEventListener("click", function() {
    const active = this.classList.toggle("active");
    var panel = this.nextElementSibling;
    if (!active) {
      panel.style.display = "none";
    } else {
      panel.style.display = "block";
    }
  });
}


    </script>
{% endblock %}